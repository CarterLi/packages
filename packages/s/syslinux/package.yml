name       : syslinux
version    : 6.04
release    : 8
source     :
    # - https://www.kernel.org/pub/linux/utils/boot/syslinux/syslinux-6.03.tar.xz : 26d3986d2bea109d5dc0e4f8c4822a459276cf021125e8c9f23c3cca5d8c850e
    - git|https://repo.or.cz/syslinux.git : bf6db5b48ec25f83939f1fdebb59028bc3c40b00
license    : GPL-2.0-or-later
summary    : Lightweight bootloaders
component  : system.utils
description: |
    The Syslinux Project covers lightweight bootloaders for MS-DOS FAT filesystems (SYSLINUX), network booting (PXELINUX), bootable "El Torito" CD-ROMs (ISOLINUX), and Linux ext2/ext3/ext4 or btrfs filesystems (EXTLINUX). The project also includes MEMDISK, a tool to boot legacy operating systems (such as DOS) from nontraditional media; it is usually used in conjunction with PXELINUX and ISOLINUX.
rundeps    :
    - mtools
ccache     : no
environment: |
    # syslinux being a delicate flower.
    unset LDFLAGS
    unset CFLAGS
    unset CXXFLAGS

    export LDFLAGS="--no-dynamic-linker"
    export EXTRA_CFLAGS=-fno-PIE
setup      : |
    %apply_patches

    # do not swallow efi compilation output to make debugging easier
    sed 's|> /dev/null 2>&1||' -i efi/check-gnu-efi.sh

    # disable debug and development flags to reduce bootloader size
    truncate --size 0 mk/devel.mk
build      : |
    make -j1 bios efi64 efi32
install    : |
    make bios efi64 efi32 install INSTALLROOT="$installdir" SBINDIR=/usr/bin MANDIR=/usr/share/man AUXDIR=%libdir%/syslinux
